
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Rails部署在heroku上时错误及解决 - Git-log-life</title>
  <meta name="author" content="dinglixiang">

  
  <meta name="description" content="在git上运行git push heroku master之后，出现 $ git push heroku master Counting objects: 65, done. Delta compression using up to 2 threads. Compressing objects &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dinglixiang.github.com/blog/2013/04/08/railsbu-shu-zai-herokushang-shi-cuo-wu-ji-jie-jue">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Git-log-life" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-39734519-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Git-log-life</a></h1>
  
    <h2>Where there is a will , there is a way.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:dinglixiang.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about.html">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Rails部署在heroku上时错误及解决</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-08T20:41:00+08:00" pubdate data-updated="true">Apr 8<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>在git上运行git push heroku master之后，出现</p>

<pre><code>$ git push heroku master  
Counting objects: 65, done.  
Delta compression using up to 2 threads.  
Compressing objects: 100% (50/50), done.  
Writing objects: 100% (65/65), 86.27 KiB, done.  
Total 65 (delta 3), reused 0 (delta 0)  

-----&gt; Heroku receiving push  
-----&gt; Ruby/Rails app detected  
-----&gt; Installing dependencies using Bundler version 1.2.0.pre  
  Running: bundle install --without development:test --path vendor/bundle --binstubs bin/  
  Fetching gem metadata from       http://rubygems.org/.........  
  Installing rake (0.9.2.2)  
  Installing abstract (1.0.0)  
  Installing activesupport (3.0.7)  
  Installing builder (2.1.2)  
...
  Installing activeresource (3.0.7)  
  Using bundler (1.2.0.pre)  
  Installing thor (0.14.6)  
  Installing railties (3.0.7)  
  Installing rails (3.0.7)  
  Installing sqlite3 (1.3.6) with native extensions  
   Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.  
   /usr/local/bin/ruby extconf.rb  
   checking for sqlite3.h... no  
   sqlite3.h is missing. Try 'port install sqlite3 +universal'  
   or 'yum install sqlite-devel' and check your shared library search path (the location where your sqlite3 shared library is located).  
   *** extconf.rb failed ***  
   Could not create Makefile due to some reason, probably lack of  
   necessary libraries and/or headers.  Check the mkmf.log file for more  
   details.  You may need configuration options.  
   Provided configuration options:  
   --with-opt-dir  
   --without-opt-dir  
   --with-opt-include  
   --without-opt-include=${opt-dir}/include  
   --with-opt-lib  
   --without-opt-lib=${opt-dir}/lib  
   --with-make-prog  
   --without-make-prog  
   --srcdir=.  
   --curdir  
   --ruby=/usr/local/bin/ruby  
   --with-sqlite3-dir  
   --without-sqlite3-dir  
   --with-sqlite3-include  
   --without-sqlite3-include=${sqlite3-dir}/include  
   --with-sqlite3-lib  
   --without-sqlite3-lib=${sqlite3-dir}/lib  
   --enable-local  
   --disable-local  
   Gem files will remain installed in /tmp/build_144lbpbfihqkv/vendor/bundle  
/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.  
   Results logged to      /tmp/build_144lbpbfihqkv/vendor/bundle/ruby/1.9.1/gems/  
sqlite3-1.3.6/ext/sqlite3/gem_make.out  
   An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.  
   Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.  

 !  
 !     Failed to install gems via Bundler.  
 !  
 !     Heroku push rejected, failed to compile Ruby/rails app  

To git@heroku.com:electric-    waterfall-3720.git  
 ! [remote rejected] master -&gt; master (pre-receive hook declined)  
error: failed to push some refs to 'git@heroku.com:electric-waterfall-3720.git' 
</code></pre>

<p>解决方案：</p>

<p>1、找到项目的gemfile文件，打开之后，修改gem sqlite3为：</p>

<pre><code>gem 'sqlite3', :group =&gt; [:development, :test]
group :production do
  gem 'thin'
  gem 'pg'
end
</code></pre>

<p>2、删除掉gemfile.lock文件</p>

<p>3、运行</p>

<pre><code>bundle install --without production
</code></pre>

<p>4、运行</p>

<pre><code>git add .
</code></pre>

<p>5、运行</p>

<pre><code>git commit -m "bundle updating sqlite3"
</code></pre>

<p>6、运行</p>

<pre><code>git push heroku master
</code></pre>

<p>OK，解决了~~~</p>

<p>参考自:<a href="http://stackoverflow.com/questions/10455527/sqlite3-h-missing-when-pushing-rails-app-to-heroku">http://stackoverflow.com/questions/10455527/sqlite3-h-missing-when-pushing-rails-app-to-heroku</a></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">dinglixiang</span></span>

      








  


<time datetime="2013-04-08T20:41:00+08:00" pubdate data-updated="true">Apr 8<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/ruby/'>Ruby</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://dinglixiang.github.com/blog/2013/04/08/railsbu-shu-zai-herokushang-shi-cuo-wu-ji-jie-jue/" data-via="" data-counturl="http://dinglixiang.github.com/blog/2013/04/08/railsbu-shu-zai-herokushang-shi-cuo-wu-ji-jie-jue/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/04/08/ubuntu-zhong-duan-yan-se-she-zhi/" title="Previous Post: Ubuntu 终端颜色设置">&laquo; Ubuntu 终端颜色设置</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/04/10/rorzhong-shi-yong-bootstrap-sass/" title="Next Post: ROR中使用 bootstrap-sass">ROR中使用 bootstrap-sass &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/04/15/jspyin-ru-css/">jsp引入css</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/13/rails-zhong-wen-wen-ti/">Rails 中文问题</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/13/install-rmagick-on-ubuntu/">Install rmagick on Ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/10/rorzhong-shi-yong-bootstrap-sass/">ROR中使用 bootstrap-sass</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/08/railsbu-shu-zai-herokushang-shi-cuo-wu-ji-jie-jue/">Rails部署在heroku上时错误及解决</a>
      </li>
    
  </ul>
</section>
<section>
<h1>Categories</h1>
<ul id="categories">
<li class='category'><a href='/blog/categories/java/'>Java (1)</a></li>
<li class='category'><a href='/blog/categories/ruby/'>Ruby (4)</a></li>
<li class='category'><a href='/blog/categories/share/'>Share (1)</a></li>
<li class='category'><a href='/blog/categories/ubuntu/'>Ubuntu (1)</a></li>
<li class='category'><a href='/blog/categories/git/'>git (1)</a></li>

</ul>
</section>




  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - dinglixiang -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'zhimadlx';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://dinglixiang.github.com/blog/2013/04/08/railsbu-shu-zai-herokushang-shi-cuo-wu-ji-jie-jue/';
        var disqus_url = 'http://dinglixiang.github.com/blog/2013/04/08/railsbu-shu-zai-herokushang-shi-cuo-wu-ji-jie-jue/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
